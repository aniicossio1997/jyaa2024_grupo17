<h1>Usuarios</h1>

<p-table
  #dt
  [value]="usuarios"
  [tableStyle]="{ 'min-width': '50rem' }"
  [paginator]="true"
  [rows]="5"
  [tableStyle]="{ 'min-width': '50rem' }"
  [rowsPerPageOptions]="[5, 10, 20]"
  [globalFilterFields]="['nombre', 'apellido', 'username', 'email']"
>
  <ng-template pTemplate="caption">
    <div class="flex align-items-center">
      <p-iconField iconPosition="left" class="ml-auto">
        <p-inputIcon>
          <i class="pi pi-search"></i>
        </p-inputIcon>
        <input
          pInputText
          type="text"
          (input)="applyFilterGlobal($event, 'contains')"
          placeholder="Buscar"
        />
      </p-iconField>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th>Acciones</th>
      <th pSortableColumn="nombre">Nombre <p-sortIcon field="nombre" /></th>
      <th pSortableColumn="apellido">
        Apellido <p-sortIcon field="apellido" />
      </th>
      <th pSortableColumn="email">Email <p-sortIcon field="email" /></th>
      <th pSortableColumn="username">
        Nombre de usuario <p-sortIcon field="username" />
      </th>
      <th pSortableColumn="rol">Rol <p-sortIcon field="rol" /></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-usuario>
    <tr>
      <td>
        <div class="card flex justify-content-center">
          <p-menu #menu [model]="actions" [popup]="true" appendTo="action" />
          <p-button
            #action
            [text]="true"
            (click)="menu.toggle($event)"
            icon="pi pi-ellipsis-v"
            severity="secondary"
          />
        </div>
      </td>
      <td>{{ usuario.nombre }}</td>
      <td>{{ usuario.apellido }}</td>
      <td>{{ usuario.email }}</td>
      <td>{{ usuario.username }}</td>
      <td>
        <p-tag
          value="{{ usuario.rol }}"
          [severity]="usuario.rol === 'ADMIN' ? 'info' : 'success'"
        />
      </td>
    </tr>
  </ng-template>
</p-table>
