import{a as qe,b as Oe,c as He,d as Je,e as Xe,g as Ye}from"./chunk-MPCCGEP2.js";import{b as ye,c as Ee,d as Ie}from"./chunk-OGQRLL7Z.js";import{a as Ve}from"./chunk-4HOYINZ7.js";import{b as ke}from"./chunk-676UXHSL.js";import{B as Ke,j as Pe,m as je,n as Ae,o as Be,p as Qe,q as Le,r as H,s as Ge,t as $e,u as Ue,w as ze,z as We}from"./chunk-N32QBCDO.js";import{a as Me,b as Te,e as O,f as z,i as we,k as Re,l as Ne}from"./chunk-MOHWG4PF.js";import{$ as d,E,F as ve,G as ge,H as I,I as be,K as j,L as A,N as B,O as Q,T as L,U as G,W as $,Y as U,Z as _e,_ as Y,a as de,ca as Ce,ea as M,fa as Se,ha as xe,ia as Fe,ja as q,m as P,pa as T,q as fe,qa as De,v as he}from"./chunk-VXQCQYAP.js";import{$ as _,A as k,Db as oe,Eb as ne,Fb as ae,Gb as x,Hb as l,Ib as me,Jb as N,Mb as le,Nb as pe,Oa as p,Ob as se,Pa as u,Pb as F,R as ee,Rb as X,S as te,Sb as ce,Uc as ue,W as K,aa as ie,eb as J,fb as re,gb as c,ia as C,ja as S,n as D,pb as a,qb as n,r as w,rb as v,vb as R,xb as h,yb as y}from"./chunk-MPDHWXUF.js";var f=(()=>{let i=class i{constructor(t,e){this.http=t,this.toastr=e,this.API_URL=Fe.API_URL+"puntosventa"}get(){let t=`${this.API_URL}`;return this.http.get(t).pipe(w(e=>e))}post(t){let e=`${this.API_URL}`;return this.http.post(e,t).pipe(w(r=>(this.toastr.success("Se ha agregado el punto de venta!"),r)),k(r=>(this.toastr.error("No se ha podido guardar el punto de venta"),D([]))))}update(t,e){let r=`${this.API_URL}/${t}`;return this.http.put(r,e).pipe(w(m=>(this.toastr.success("Se ha editado el punto de venta!"),m)),k(m=>(this.toastr.error("No se ha podido editar el punto de venta"),D([]))))}getById(t){let e=`${this.API_URL}/${t}`;return this.http.get(e)}delete(t){let e=`${this.API_URL}/${t}`;return this.http.delete(e).pipe(w(r=>(this.toastr.success("Se ha eliminado exitosamente el punto de venta"),r)),k(r=>(this.toastr.error("No se ha podido eliminar el punto de venta"),D([]))))}ngOnDestroy(){}};i.\u0275fac=function(e){return new(e||i)(K(de),K(q))},i.\u0275prov=ee({token:i,factory:i.\u0275fac});let o=i;return o})();var mt=["dt"],lt=()=>["nombre"],pt=()=>({"min-width":"auto"}),st=o=>[o];function ct(o,i){if(o&1){let s=R();a(0,"h2",12),l(1,"Puntos de Venta"),n(),a(2,"div",13)(3,"span",14),v(4,"i",15),a(5,"input",16),h("input",function(e){C(s),y();let r=x(2);return S(r.filterGlobal(e.target.value,"contains"))}),n()(),v(6,"p-button",17),n()}if(o&2){let s=y();p(6),c("routerLink",ce(1,st,"/"+s.RoutestEnum.PuntoVenta+"/"+s.RoutestEnum.New))}}function ut(o,i){o&1&&(a(0,"tr")(1,"th",18),l(2,"Acciones"),n(),a(3,"th",19),l(4,"Nombre "),v(5,"p-sortIcon",20),n(),a(6,"th",21),l(7," Descripci\xF3n "),v(8,"p-sortIcon",22),n()())}function dt(o,i){if(o&1){let s=R();a(0,"tr")(1,"td")(2,"button",23),h("click",function(e){let r=C(s).$implicit,m=x(4),b=y();return S(b.generateMenu(r,m,e))}),n(),v(3,"p-menu",24,2),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n()()}if(o&2){let s=i.$implicit,t=y();p(3),c("popup",!0)("model",t.itemsMenu),p(3),N(" ",s.nombre," "),p(2),N(" ",(s==null?null:s.descripcion)!=""?s==null?null:s.descripcion:"-"," ")}}function ft(o,i){if(o&1&&(a(0,"div",25),l(1),n()),o&2){let s=y(),t=x(2);p(),N(" En total hay ",t.filteredValue?t.filteredValue.length:s.puntosVenta.length," registros. ")}}function ht(o,i){o&1&&(a(0,"tr")(1,"td",26),l(2," No se encontraron registros "),n()()),o&2&&(p(),re("colspan",5))}function vt(o,i){if(o&1){let s=R();a(0,"div",27)(1,"span",28),l(2),n(),a(3,"p",29),l(4),n(),a(5,"div",30)(6,"button",31),h("click",function(){C(s),y();let e=x(9);return S(e.reject())}),n(),a(7,"button",32),h("click",function(){C(s),y();let e=x(9);return S(e.accept())}),n()()()}if(o&2){let s=i.$implicit;p(2),N(" ",s.header," "),p(2),me(s.message)}}var rt=(()=>{let i=class i{get RoutestEnum(){return d}constructor(t,e,r){this.puntoVentaService=t,this.confirmationService=e,this.router=r,this.itemsMenu=[],this.puntosVenta=[],this.productDialog=!1}ngOnInit(){this.fetchAll()}fetchAll(){this.puntoVentaService.get().subscribe(t=>{this.puntosVenta=t})}generateMenu(t,e,r){e.toggle(r),this.itemsMenu=[{label:"Editar",icon:"pi pi-pencil",command:()=>{this.router.navigate([`/${d.PuntoVenta}/${d.Edit}/`,t.id])}},{label:"Eliminar",icon:"pi pi-trash",command:()=>{this.delete(t)}}]}delete(t){this.confirmationService.confirm({message:"\xBFEsta seguro de eliminar  el punto de venta "+t.nombre+"?",header:"Confirmar la Eliminaci\xF3n",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",key:"positionDialog",acceptButtonStyleClass:"p-button-danger p-button-text ",rejectButtonStyleClass:"p-button-secondary p-button-text",accept:()=>{this.puntoVentaService.delete(t.id).subscribe(e=>{this.fetchAll()})},reject:()=>{}})}};i.\u0275fac=function(e){return new(e||i)(u(f),u(P),u(M))},i.\u0275cmp=_({type:i,selectors:[["app-query"]],viewQuery:function(e,r){if(e&1&&oe(mt,5),e&2){let m;ne(m=ae())&&(r.dt=m.first)}},features:[F([f,fe,P])],decls:11,vars:9,consts:[["dt",""],["cd",""],["menu",""],[1,"card"],["dataKey","id",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],["key","positionDialog","position","center"],["pTemplate","headless"],[1,"mb-4"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pRipple","","severity","primary","label","Agregar Punto de Venta","icon","pi pi-plus",1,"mr-2",3,"routerLink"],[2,"width","4rem"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","descripcion"],["field","descripcion"],["pButton","","pRipple","","type","button","icon","pi pi-bars",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],[1,"flex","align-items-center","justify-content-between"],[1,"text-center","py-4"],[1,"flex","flex-column","p-5","surface-overlay","border-round"],[1,"font-bold","text-2xl","block","mb-2","mt-4"],[1,"mb-0"],[1,"flex","justify-content-between","flex-wrap","mt-4"],["pButton","","label","No",1,"p-button-outlined","p-button-secondary","w-5rem",3,"click"],["pButton","","label","Si",1,"w-5rem","p-button-danger",3,"click"]],template:function(e,r){if(e&1){let m=R();a(0,"div",3)(1,"p-table",4,0),se("selectionChange",function(g){return C(m),pe(r.selectedProducts,g)||(r.selectedProducts=g),S(g)}),J(3,ct,7,3,"ng-template",5)(4,ut,9,0,"ng-template",6)(5,dt,9,4,"ng-template",7)(6,ft,2,1,"ng-template",8)(7,ht,3,1,"ng-template",9),n(),a(8,"p-confirmDialog",10,1),J(10,vt,8,2,"ng-template",11),n()()}e&2&&(p(),c("value",r.puntosVenta)("rows",5)("paginator",!0)("globalFilterFields",X(7,lt))("tableStyle",X(8,pt)),le("selection",r.selectedProducts),c("rowHover",!0))},dependencies:[Se,ge,I,he,T,Re,Ae,Be,Qe,E,Me],encapsulation:2});let o=i;return o})();var ot=(()=>{let i=class i{constructor(t,e,r,m){this.fb=t,this.router=e,this.puntoVentaService=r,this.toastr=m,this.myForm=this.fb.group({nombre:["",A.required],descripcion:[""]})}ngOnInit(){}cancel(){this.router.navigate(["/"+d.PuntoVenta])}save(){if(this.myForm.valid){let t={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value};this.puntoVentaService.post(t).subscribe(e=>{e&&this.cancel()})}}};i.\u0275fac=function(e){return new(e||i)(u(U),u(M),u(f),u(q))},i.\u0275cmp=_({type:i,selectors:[["app-new"]],features:[F([f])],decls:20,vars:7,consts:[[1,"card"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","nombre"],[1,"text-danger"],["pInputText","","id","nombre","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","5","cols","30","pInputTextarea","","placeholder","Descripci\xF3n",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(e,r){if(e&1&&(a(0,"div",0)(1,"h5",1),l(2,"Agregar Punto de Venta"),n(),a(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Nombre "),a(7,"span",5),l(8,"*"),n()(),v(9,"input",6)(10,"span",7),n(),a(11,"div",3)(12,"label",8),l(13,"Descripci\xF3n"),n(),a(14,"textarea",9),l(15,"      "),n()(),a(16,"div",10)(17,"div",11)(18,"p-button",12),h("click",function(){return r.cancel()}),n(),a(19,"p-button",13),h("click",function(){return r.save()}),n()()()()()),e&2){let m,b,g,V;p(3),c("formGroup",r.myForm),p(6),c("valueForm",(m=r.myForm.get("nombre"))==null?null:m.value)("errors",(b=r.myForm.get("nombre"))==null?null:b.errors),p(),c("valueForm",(g=r.myForm.get("nombre"))==null?null:g.value)("errors",(V=r.myForm.get("nombre"))==null?null:V.errors),p(4),c("autoResize",!0),p(5),c("disabled",r.myForm.invalid)}},dependencies:[I,T,H,L,j,B,Q,G,$,E,O,z],encapsulation:2});let o=i;return o})();var nt=(()=>{let i=class i{constructor(t,e,r,m){this.activateRouter=t,this.puntoVentaService=e,this.router=r,this.fb=m,this.myForm=this.fb.group({nombre:["",A.required],descripcion:[""]})}ngOnInit(){this.id=Number(this.activateRouter.snapshot.paramMap.get("id")),this.id&&this.puntoVentaService.getById(this.id).subscribe(t=>{this.myForm.get("nombre").setValue(t.nombre),this.myForm.get("descripcion").setValue(t.descripcion),this.myForm.get("nombre").markAsTouched(),this.myForm.get("descripcion").markAsTouched(),this.myForm.updateValueAndValidity()})}cancel(){this.router.navigate(["/"+d.PuntoVenta])}save(){if(this.myForm.valid){let t={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value};this.puntoVentaService.update(this.id,t).subscribe(e=>{e&&this.cancel()})}}get formNombre(){return this.myForm.get("nombre").valueChanges.pipe()}};i.\u0275fac=function(e){return new(e||i)(u(Ce),u(f),u(M),u(U))},i.\u0275cmp=_({type:i,selectors:[["app-edit-puntoventa"]],features:[F([f])],decls:20,vars:7,consts:[[1,"card"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","nombre"],[1,"text-danger"],["pInputText","","id","nombre","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","5","cols","30","placeholder","Descripci\xF3n","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(e,r){if(e&1&&(a(0,"div",0)(1,"h5",1),l(2,"Editar punto de venta"),n(),a(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Nombre "),a(7,"span",5),l(8,"*"),n()(),v(9,"input",6)(10,"span",7),n(),a(11,"div",3)(12,"label",8),l(13,"Descripci\xF3n"),n(),a(14,"textarea",9),l(15,"      "),n()(),a(16,"div",10)(17,"div",11)(18,"p-button",12),h("click",function(){return r.cancel()}),n(),a(19,"p-button",13),h("click",function(){return r.save()}),n()()()()()),e&2){let m,b,g,V;p(3),c("formGroup",r.myForm),p(6),c("valueForm",(m=r.myForm.get("nombre"))==null?null:m.value)("errors",(b=r.myForm.get("nombre"))==null?null:b.errors),p(),c("valueForm",(g=r.myForm.get("nombre"))==null?null:g.value)("errors",(V=r.myForm.get("nombre"))==null?null:V.errors),p(4),c("autoResize",!0),p(5),c("disabled",r.myForm.invalid)}},dependencies:[I,T,H,L,j,B,Q,G,$,E,O,z],encapsulation:2});let o=i;return o})();var Ct=[{path:"",redirectTo:"query",pathMatch:"full"},{path:`${d.Edit}/:id`,component:nt,title:"Editar Punto de Venta"},{path:d.Query,component:rt,title:"Listado de Puntos de Venta"},{path:d.New,component:ot,title:"Agregar Puntos de Venta"}],_i=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ie({type:i}),i.\u0275inj=te({imports:[ue,xe.forChild(Ct),be,ye,De,Ge,Ne,$e,Ue,qe,Oe,Le,Ie,_e,Y,ze,Ve,Pe,He,We,Ke,Je,ke,je,Xe,ve,Ee,Ye,Te,Y,we]});let o=i;return o})();export{_i as PuntoVentaModule};
