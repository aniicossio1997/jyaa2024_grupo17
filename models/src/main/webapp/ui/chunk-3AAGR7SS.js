import{a as Rt}from"./chunk-5M73CAGP.js";import{a as yt,b as bt,c as Ft,d as Et,e as Tt,g as Mt}from"./chunk-WI44UCS5.js";import{a as Je,b as We,c as ot,d as nt}from"./chunk-F3UMLMNG.js";import{a as mt}from"./chunk-WOC7MWNQ.js";import{a as g}from"./chunk-DRSLEQWH.js";import{a as Ce,b as ye}from"./chunk-47TK7PFT.js";import{a as wt,b as Dt}from"./chunk-BZDX7QXS.js";import{a as ce,b as ct}from"./chunk-R65F2ROU.js";import{a as ue,b as ut}from"./chunk-AZKQCPMW.js";import{a as se}from"./chunk-WBNJTG47.js";import{B as St,i as fe,j as ft,l as ve,m as vt,n as ge,o as _e,p as he,q as gt,r as O,s as _t,t as ht,u as Ct,w as It,z as xt}from"./chunk-IJ6BS5SH.js";import{a as pe,b as at,e as L,f as Q,g as lt,h as de,j as st,m as pt}from"./chunk-AUGZRSW5.js";import{$ as u,E as x,F as Ke,G as le,H as S,I as Ze,K as V,L as E,N as k,O as $,T as A,U as G,W as j,Y as P,Z as Xe,_ as Ee,a as He,ca as B,ea as T,fa as Ye,ha as et,ia as tt,ja as it,la as rt,pa as M,qa as dt,v as me}from"./chunk-QZ7GV5CC.js";import{$ as I,$b as H,Db as Ge,Eb as je,Fb as Pe,Gb as U,Hb as l,Ib as W,Jb as b,Kb as Be,Kc as Qe,Mc as Oe,Nc as qe,Oa as m,Oc as Ue,Pa as c,Pb as F,R as ke,Rb as Z,Rc as ae,S as $e,Sb as Le,Tc as ze,W as be,_b as z,a as Ne,aa as Ae,b as Ve,eb as D,fb as oe,gb as p,ia as R,ja as N,lb as Ie,mb as Fe,nb as xe,ob as Se,pb as a,qb as o,r as J,rb as v,sb as ne,tb as re,vb as q,xb as h,yb as f}from"./chunk-FI3UJX5Y.js";var Ot=()=>["nombre","totalValorCompra"],qt=()=>({"min-width":"auto"}),Ut=t=>[t];function zt(t,r){if(t&1){let s=q();a(0,"h2",9),l(1,"Insumos"),o(),a(2,"div",10)(3,"span",11),v(4,"i",12),a(5,"input",13),h("input",function(n){R(s),f();let e=U(2);return N(e.filterGlobal(n.target.value,"contains"))}),o()(),v(6,"p-button",14),o()}if(t&2){let s=f();m(6),p("routerLink",Le(1,Ut,"/"+s.RoutestEnum.Insumo+"/"+s.RoutestEnum.New))}}function Ht(t,r){if(t&1&&(a(0,"th",17),l(1),v(2,"p-sortIcon",18),o()),t&2){let s=r.$implicit;p("pSortableColumn",s.field),m(),b(" ",s.header," "),m(),p("field",s.field)}}function Kt(t,r){if(t&1&&(a(0,"tr")(1,"th",15),l(2," Acciones "),o(),D(3,Ht,3,3,"th",16),o()),t&2){let s=f();m(3),p("ngForOf",s.cols)}}function Zt(t,r){if(t&1&&(ne(0),l(1),z(2,"titlecase"),re()),t&2){let s=f().$implicit,i=f().$implicit;m(),b(" ",H(2,1,i[s.field])," ")}}function Jt(t,r){if(t&1&&(ne(0),l(1),z(2,"priceTransform"),re()),t&2){let s=f().$implicit,i=f().$implicit;m(),b(" ",H(2,1,i[s.field])," ")}}function Wt(t,r){if(t&1&&(ne(0),l(1),re()),t&2){let s=f().$implicit,i=f().$implicit;m(),b(" ",i[s.field]," ")}}function Xt(t,r){if(t&1&&(a(0,"td",22),D(1,Zt,3,3,"ng-container",23)(2,Jt,3,3,"ng-container",23)(3,Wt,2,1,"ng-container",24),o()),t&2){let s=r.$implicit;p("ngSwitch",s.field),m(),p("ngSwitchCase","nombre"),m(),p("ngSwitchCase","totalValorCompra")}}function Yt(t,r){if(t&1){let s=q();a(0,"tr")(1,"td")(2,"button",19),h("click",function(n){let e=R(s).$implicit,d=U(4),_=f();return N(_.generateMenu(e,d,n))}),o(),v(3,"p-menu",20,1),o(),D(5,Xt,4,3,"td",21),o()}if(t&2){let s=f();m(3),p("popup",!0)("model",s.itemsMenu),m(2),p("ngForOf",s.cols)}}function ei(t,r){if(t&1&&(a(0,"div",25),l(1),o()),t&2){let s=f(),i=U(2);m(),b(" En total hay ",i.filteredValue?i.filteredValue.length:s.insumos.length," registros. ")}}function ti(t,r){t&1&&(a(0,"tr")(1,"td",26),l(2," No se encontraron registros "),o()()),t&2&&(m(),oe("colspan",5))}var Nt=(()=>{let r=class r{get RoutestEnum(){return u}constructor(i,n,e){this.insumosService=i,this.confirmationDialogService=n,this.router=e,this.cols=[],this.insumos=[],this.itemsMenu=[]}ngOnInit(){this.initColumns(),this.getAll()}initColumns(){this.cols=[{field:"nombre",header:"Nombre"},{field:"unidadMedida",header:"Unidad de medida"},{field:"totalCantidadDisponible",header:"Total cantidad disponible"}]}getAll(){this.insumosService.get().subscribe(i=>this.insumos=i)}generateMenu(i,n,e){n.toggle(e),this.itemsMenu=[{label:"Gestionar ingresos",icon:"pi pi-arrow-right-arrow-left ",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Gestion}/`,i.id])}},{label:"Editar",icon:"pi pi-pencil",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Edit}/`,i.id])}},{label:"Eliminar",icon:"pi pi-trash",command:()=>{this.delete(i)}}]}delete(i){this.confirmationDialogService.confirmDelete(`\xBFEst\xE1 seguro que desea eliminar la materia prima ${i.nombre.toLocaleUpperCase()} ?`,()=>{this.insumosService.delete(i.id).subscribe(()=>{this.getAll()})})}};r.\u0275fac=function(n){return new(n||r)(c(g),c(se),c(T))},r.\u0275cmp=I({type:r,selectors:[["app-insumos-query"]],features:[F([g])],decls:8,vars:9,consts:[["dt",""],["menu",""],[1,"card"],["dataKey","id","currentPageReportTemplate","Mostrar {first} a {last} de {totalRecords} registros",3,"value","rows","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"mb-4"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pRipple","","label","Agragar Insumo","icon","pi pi-plus",1,"mr-2",3,"routerLink"],[2,"width","4rem"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","pRipple","","type","button","icon","pi pi-bars",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"flex","align-items-center","justify-content-between"],[1,"text-center","py-4"]],template:function(n,e){n&1&&(a(0,"div",2)(1,"p-table",3,0),D(3,zt,7,3,"ng-template",4)(4,Kt,4,1,"ng-template",5)(5,Yt,6,3,"ng-template",6)(6,ei,2,1,"ng-template",7)(7,ti,3,1,"ng-template",8),o()()),n&2&&(m(),p("value",e.insumos)("rows",5)("paginator",!0)("globalFilterFields",Z(7,Ot))("tableStyle",Z(8,qt))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[Qe,Oe,qe,Ue,Ye,me,le,S,M,ge,_e,he,x,pe,ae,de]});let t=r;return t})();var Vt=(()=>{let r=class r{constructor(i,n,e,d){this.fb=i,this.router=n,this.insumosService=e,this.activatedRouter=d,this.unidadMedidaArray=Object.keys(Ce),this.myForm=this.fb.group({nombre:["",E.required],unidadMedida:["",E.required],descripcion:[""]})}ngOnInit(){let i=Number(this.activatedRouter.snapshot.paramMap.get("id"));i&&this.insumosService.getById(i).subscribe(n=>{this.insumo=Ve(Ne({},n),{cantidadDisponible:0}),this.myForm.get("nombre").setValue(n.nombre),this.myForm.get("descripcion").setValue(n.descripcion),this.myForm.get("unidadMedida").setValue(n.unidadMedida),this.myForm.updateValueAndValidity()})}cancel(){this.router.navigate(["/"+u.Insumo])}save(){if(this.myForm.valid){let i={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value,unidadMedida:this.myForm.get("unidadMedida").value};this.insumosService.put(this.insumo.id,i).subscribe(n=>{n&&this.router.navigate([`/${u.Insumo}/`])})}}};r.\u0275fac=function(n){return new(n||r)(c(P),c(T),c(g),c(B))},r.\u0275cmp=I({type:r,selectors:[["app-insumos-edit"]],features:[F([g])],decls:22,vars:10,consts:[[1,"card",2,"width","80%"],[1,"mb-5"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","firstname2"],["pInputText","","id","firstname2","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["placeholder","Selecciona una unidad de medida","formControlName","unidadMedida",3,"options","autoDisplayFirst","value"],["htmlFor","descripcionid"],["formControlName","descripcion","placeholder","Descripci\xF3n","rows","5","cols","30","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Volver","icon","pi pi-times","severity","secondary",3,"onClick"],["pRipple","","label","Guardar","icon","pi pi-check",3,"onClick","disabled"]],template:function(n,e){if(n&1&&(a(0,"div",0)(1,"h5",1),l(2,"Editar Insumo"),o(),a(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Nombre *"),o(),v(7,"input",5)(8,"span",6),o(),a(9,"div",3)(10,"label",7),l(11,"Unidad de medida *"),o(),v(12,"p-dropdown",8),o(),a(13,"div",3)(14,"label",9),l(15,"Descripci\xF3n"),o(),a(16,"textarea",10),l(17,"      "),o()(),a(18,"div",11)(19,"div",12)(20,"p-button",13),h("onClick",function(){return e.cancel()}),o(),a(21,"p-button",14),h("onClick",function(){return e.save()}),o()()()()()),n&2){let d,_,C,y;m(3),p("formGroup",e.myForm),m(4),p("valueForm",(d=e.myForm.get("nombre"))==null?null:d.value)("errors",(_=e.myForm.get("nombre"))==null?null:_.errors),m(),p("valueForm",(C=e.myForm.get("nombre"))==null?null:C.value)("errors",(y=e.myForm.get("nombre"))==null?null:y.errors),m(4),p("options",e.unidadMedidaArray)("autoDisplayFirst",!1)("value",e.myForm.get("unidadMedida")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,A,V,k,$,G,j,fe,x,L,Q]});let t=r;return t})();var kt=(()=>{let r=class r{constructor(i,n,e){this.fb=i,this.router=n,this.insumosService=e,this.unidadMedidaArray=Object.keys(Ce),this.initForm()}ngOnInit(){}initForm(){this.myForm=this.fb.group({nombre:["",E.required],unidadMedida:["",E.required],descripcion:[""]})}cancel(){this.router.navigate(["/"+u.Insumo])}save(){if(this.myForm.valid){let i={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value,unidadMedida:this.myForm.get("unidadMedida").value};this.insumosService.post(i).subscribe(n=>{n&&this.cancel()})}}};r.\u0275fac=function(n){return new(n||r)(c(P),c(T),c(g))},r.\u0275cmp=I({type:r,selectors:[["app-insumos-new"]],features:[F([g])],decls:28,vars:10,consts:[[1,"card",2,"width","80%"],[1,"mb-5"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","firstname2"],[1,"text-danger"],["pInputText","","id","firstname2","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["placeholder","Selecciona una unidad de medida","formControlName","unidadMedida",3,"options","autoDisplayFirst","value"],["htmlFor","descripcionid"],[1,"text-secondary"],["formControlName","descripcion","rows","5","cols","30","placeholder","Descripci\xF3n","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"onClick"],["pRipple","","label","Guardar","icon","pi pi-check",3,"onClick","disabled"]],template:function(n,e){if(n&1&&(a(0,"div",0)(1,"h5",1),l(2,"Agregar Insumo"),o(),a(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Nombre "),a(7,"span",5),l(8,"*"),o()(),v(9,"input",6)(10,"span",7),o(),a(11,"div",3)(12,"label",8),l(13,"Unidad de medida "),a(14,"span",5),l(15,"*"),o()(),v(16,"p-dropdown",9),o(),a(17,"div",3)(18,"label",10),l(19,"Descripci\xF3n "),a(20,"span",11),l(21,"(opcional)"),o()(),a(22,"textarea",12),l(23,"      "),o()(),a(24,"div",13)(25,"div",14)(26,"p-button",15),h("onClick",function(){return e.cancel()}),o(),a(27,"p-button",16),h("onClick",function(){return e.save()}),o()()()()()),n&2){let d,_,C,y;m(3),p("formGroup",e.myForm),m(6),p("valueForm",(d=e.myForm.get("nombre"))==null?null:d.value)("errors",(_=e.myForm.get("nombre"))==null?null:_.errors),m(),p("valueForm",(C=e.myForm.get("nombre"))==null?null:C.value)("errors",(y=e.myForm.get("nombre"))==null?null:y.errors),m(6),p("options",e.unidadMedidaArray)("autoDisplayFirst",!1)("value",e.myForm.get("unidadMedida")),m(6),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,A,V,k,$,G,j,fe,x,L,Q]});let t=r;return t})();var w=(()=>{let r=class r{constructor(i,n){this.http=i,this.toastr=n,this.API_URL=tt.API_URL+"ingresoInsumo"}delete(i){let n=`${this.API_URL}/${i}`;return this.http.delete(n).pipe(J(e=>(this.toastr.success("Exito! Se elimino el ingreso del insumo "),e)))}post(i){let n=`${this.API_URL}`;return this.http.post(n,i).pipe(J(e=>(this.toastr.success("Exito! se registro un nuevo ingreso "),e)))}getById(i){let n=`${this.API_URL}/${i}`;return this.http.get(n).pipe(J(e=>e))}putEdit(i,n){let e=`${this.API_URL}/${i}`;return this.http.put(e,n).pipe(J(d=>(this.toastr.success("Exito! se modifico el registro "),d)))}};r.\u0275fac=function(n){return new(n||r)(be(He),be(it))},r.\u0275prov=ke({token:r,factory:r.\u0275fac});let t=r;return t})();var $t=(()=>{let r=class r{constructor(i,n,e,d,_){this.activatedRoute=i,this.router=n,this.ingresoInsumoService=e,this.fb=d,this.insumosService=_,this.positiveNumberValidator=C=>{let y=C.value;return isNaN(y)||y<0?{positiveNumber:{value:C.value}}:null},this.initForm()}ngOnInit(){this.id=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.ingresoInsumoService.getById(this.id).subscribe(i=>{i&&(this.ingreso=i,this.myForm.get("descripcion").setValue(this.ingreso.descripcion),this.myForm.get("valorCompra").setValue(this.ingreso.valorCompra),this.myForm.get("cantidad").setValue(this.ingreso.cantidad),this.myForm.updateValueAndValidity())})}cancel(){this.router.navigate([`/${u.Insumo}/${u.Gestion}`,this.ingreso.insumo.id])}save(){if(this.myForm.valid){let i={descripcion:this.myForm.get("descripcion").value,cantidad:this.myForm.get("cantidad").value,codigo:this.ingreso.codigo,valorCompra:this.myForm.get("valorCompra").value,insumoId:this.ingreso.insumo.id};this.ingresoInsumoService.putEdit(this.id,i).subscribe(n=>{n&&this.cancel()})}}initForm(){this.myForm=this.fb.group({descripcion:[""],valorCompra:["",[E.required,this.positiveNumberValidator]],codigo:[""],cantidad:["",[E.required,this.positiveNumberValidator]]})}};r.\u0275fac=function(n){return new(n||r)(c(B),c(T),c(w),c(P),c(g))},r.\u0275cmp=I({type:r,selectors:[["app-insumos-edit-ingreso"]],features:[F([w,g])],decls:37,vars:14,consts:[["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"card",2,"width","80%"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","familiaPrimaId",1,"mr-3"],["id","disabled-input","type","text","pInputText","",1,"font-bold",3,"disabled","value"],["htmlFor","valorCompra"],["inputId","locale-user","id","valorCompra","formControlName","valorCompra","appCustomInputError","",3,"minFractionDigits","valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["pInputText","","placeholder","Ingrese una cantidad","formControlName","cantidad",3,"value"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","4","cols","20","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"onClick","disabled"]],template:function(n,e){if(n&1&&(a(0,"p-button",0),h("click",function(){return e.cancel()}),o(),a(1,"div",1)(2,"h5",2),l(3,"Editar Ingreso"),o(),a(4,"form",3)(5,"div",4)(6,"label",5),l(7,"C\xF3digo: "),o(),v(8,"input",6),o(),a(9,"div",4)(10,"label",5),l(11,"Insumo: "),o(),v(12,"input",6),o(),a(13,"div",4)(14,"label",7),l(15,"Valor de compra *"),o(),a(16,"p-inputGroup")(17,"p-inputGroupAddon"),l(18,"$"),o(),v(19,"p-inputNumber",8),o(),v(20,"span",9),o(),a(21,"div",4)(22,"label",10),l(23,"Cantidad*"),o(),a(24,"p-inputGroup")(25,"p-inputGroupAddon"),l(26),o(),v(27,"input",11),o()(),a(28,"div",4)(29,"label",12),l(30,"Descripci\xF3n"),o(),a(31,"textarea",13),l(32,"      "),o()(),a(33,"div",14)(34,"div",15)(35,"p-button",16),h("click",function(){return e.cancel()}),o(),a(36,"p-button",17),h("onClick",function(){return e.save()}),o()()()()()),n&2){let d,_,C,y;m(4),p("formGroup",e.myForm),m(4),p("disabled",!0)("value",e.ingreso==null?null:e.ingreso.codigo),m(4),p("disabled",!0)("value",e.ingreso==null?null:e.ingreso.insumo.nombre),m(7),p("minFractionDigits",2)("valueForm",(d=e.myForm.get("valorCompra"))==null?null:d.value)("errors",(_=e.myForm.get("valorCompra"))==null?null:_.errors),m(),p("valueForm",(C=e.myForm.get("valorCompra"))==null?null:C.value)("errors",(y=e.myForm.get("valorCompra"))==null?null:y.errors),m(6),b(" ",e.ingreso==null?null:e.ingreso.unidadMedida," "),m(),p("value",e.myForm.get("cantidad")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,A,V,k,$,G,j,ue,ve,x,ce,L,Q]});let t=r;return t})();var At=(()=>{let r=class r{constructor(i,n,e,d,_){this.activatedRoute=i,this.router=n,this.ingresoInsumoService=e,this.fb=d,this.insumosService=_,this.positiveNumberValidator=C=>{let y=C.value;return isNaN(y)||y<0?{positiveNumber:{value:C.value}}:null},this.initForm()}ngOnInit(){let i=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.insumosService.getById(i).subscribe(n=>{this.insumo=n,this.myForm.updateValueAndValidity()})}cancel(){this.router.navigate([`/${u.Insumo}/${u.Gestion}`,this.insumo.id])}save(){if(this.myForm.valid){let i={descripcion:this.myForm.get("descripcion").value,cantidad:this.myForm.get("cantidad").value,codigo:"",valorCompra:this.myForm.get("valorCompra").value,insumoId:this.insumo.id};this.ingresoInsumoService.post(i).subscribe(n=>{n&&this.cancel()})}}initForm(){this.myForm=this.fb.group({descripcion:[""],valorCompra:[null,[E.required,this.positiveNumberValidator]],codigo:[""],cantidad:[null,[E.required,this.positiveNumberValidator]]})}};r.\u0275fac=function(n){return new(n||r)(c(B),c(T),c(w),c(P),c(g))},r.\u0275cmp=I({type:r,selectors:[["app-insumo-add-ingreso"]],features:[F([w,g])],decls:37,vars:13,consts:[["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"card",2,"width","80%"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","familiaPrimaId",1,"mr-3"],["id","disabled-input","type","text","pInputText","",1,"font-bold",3,"disabled","value"],["htmlFor","valorCompra"],[1,"text-danger"],["inputId","locale-user","placeholder","Ingrese un valor de compra","id","valorCompra","formControlName","valorCompra","appCustomInputError","",3,"minFractionDigits","valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["placeholder","Ingrese una cantidad","formControlName","cantidad","inputId","integeronly",3,"value"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","4","cols","20","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check","tooltipPosition","top",3,"onClick","disabled","pTooltip"]],template:function(n,e){if(n&1&&(a(0,"p-button",0),h("click",function(){return e.cancel()}),o(),a(1,"div",1)(2,"h5",2),l(3,"Agregar Ingreso"),o(),a(4,"form",3)(5,"div",4)(6,"label",5),l(7,"Insumo: "),o(),v(8,"input",6),o(),a(9,"div",4)(10,"label",7),l(11,"Valor de compra "),a(12,"span",8),l(13,"*"),o()(),a(14,"p-inputGroup")(15,"p-inputGroupAddon"),l(16,"$"),o(),v(17,"p-inputNumber",9),o(),v(18,"span",10),o(),a(19,"div",4)(20,"label",11),l(21,"Cantidad "),a(22,"span",8),l(23,"*"),o()(),a(24,"p-inputGroup")(25,"p-inputGroupAddon"),l(26),o(),v(27,"p-inputNumber",12),o()(),a(28,"div",4)(29,"label",13),l(30,"Descripci\xF3n"),o(),a(31,"textarea",14),l(32,"      "),o()(),a(33,"div",15)(34,"div",16)(35,"p-button",17),h("click",function(){return e.cancel()}),o(),a(36,"p-button",18),h("onClick",function(){return e.save()}),o()()()()()),n&2){let d,_,C,y;m(4),p("formGroup",e.myForm),m(4),p("disabled",!0)("value",e.insumo==null?null:e.insumo.nombre),m(9),p("minFractionDigits",2)("valueForm",(d=e.myForm.get("valorCompra"))==null?null:d.value)("errors",(_=e.myForm.get("valorCompra"))==null?null:_.errors),m(),p("valueForm",(C=e.myForm.get("valorCompra"))==null?null:C.value)("errors",(y=e.myForm.get("valorCompra"))==null?null:y.errors),m(8),b(" ",e.insumo==null?null:e.insumo.unidadMedida," "),m(),p("value",e.myForm.get("cantidad")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)("pTooltip",e.myForm.invalid?"Debe completar los campos requeridos":null)}},dependencies:[S,M,O,A,V,k,$,G,j,ue,ve,x,rt,ce,L,Q]});let t=r;return t})();var ai=["dt"],mi=()=>["nombre","cantidad","descripcion","valorCompra"],li=()=>({"min-width":"auto"});function si(t,r){if(t&1){let s=q();a(0,"div",17)(1,"div")(2,"h5",18),l(3,"Historial de ingresos"),o(),a(4,"span",19),v(5,"i",20),a(6,"input",21),h("input",function(n){R(s),f();let e=U(23);return N(e.filterGlobal(n.target.value,"contains"))}),o()()()()}}function pi(t,r){if(t&1&&(a(0,"th",23),l(1),v(2,"p-sortIcon",24),o()),t&2){let s=f().$implicit;p("pSortableColumn",s.field),m(),b(" ",s.header," "),m(),p("field",s.field.nombre)}}function di(t,r){if(t&1&&(a(0,"th",23),l(1),v(2,"p-sortIcon",24),o()),t&2){let s=f().$implicit;p("pSortableColumn",s.field),m(),b(" ",s.header," "),m(),p("field",s.field)}}function ui(t,r){if(t&1&&D(0,pi,3,3,"th",23)(1,di,3,3,"th",23),t&2){let s,i=r.$implicit;Ie((s=i.field)==="familiaProductora"?0:1)}}function ci(t,r){if(t&1&&(a(0,"tr")(1,"th",22),l(2," Acciones "),o(),xe(3,ui,2,1,null,null,Fe),o()),t&2){let s=f();m(3),Se(s.cols)}}function fi(t,r){if(t&1&&(a(0,"td"),l(1),z(2,"dateTransformPipe"),o()),t&2){let s=f().$implicit,i=f().$implicit;m(),W(H(2,1,i[s.field]))}}function vi(t,r){if(t&1&&(a(0,"td"),l(1),z(2,"priceTransform"),o()),t&2){let s=f().$implicit,i=f().$implicit;m(),W(H(2,1,i[s.field]))}}function gi(t,r){if(t&1&&(a(0,"td"),l(1),a(2,"b"),l(3),o()()),t&2){let s=f().$implicit,i=f().$implicit,n=f();m(),b("",i[s.field]," "),m(2),W(n.insumo==null?null:n.insumo.unidadMedida)}}function _i(t,r){if(t&1&&(a(0,"td"),l(1),o()),t&2){let s=f().$implicit,i=f().$implicit;m(),b(" ",i[s.field]==""?"-":i[s.field]," ")}}function hi(t,r){if(t&1&&D(0,fi,3,3,"td")(1,vi,3,3,"td")(2,gi,4,2,"td")(3,_i,2,1,"td"),t&2){let s,i=r.$implicit;Ie((s=i.field)==="fecha"?0:s==="valorCompra"?1:s==="cantidad"?2:3)}}function Ci(t,r){if(t&1){let s=q();a(0,"tr")(1,"td")(2,"button",25),h("click",function(n){let e=R(s).$implicit,d=U(4),_=f();return N(_.generateMenu(e,d,n))}),o(),v(3,"p-menu",26,1),o(),xe(5,hi,4,1,null,null,Fe),o()}if(t&2){let s=f();m(3),p("popup",!0)("model",s.itemsMenu),m(2),Se(s.cols)}}function yi(t,r){if(t&1&&(a(0,"div",17),l(1),o()),t&2){let s=f();m(),b(" En total hay ",s.insumo!=null&&s.insumo.ingresos?s.insumo.ingresos.length:0," registros. ")}}function bi(t,r){t&1&&(a(0,"tr")(1,"td",27),l(2," No se encontraron registros "),o()()),t&2&&(m(),oe("colspan",5))}var Gt=(()=>{let r=class r{get RoutestEnum(){return u}constructor(i,n,e,d,_){this.insumosService=i,this.activateRouter=n,this.router=e,this.confirmationDialogService=d,this.ingresoInsumoService=_,this.itemsMenu=[]}ngOnInit(){this.getRefresh(),this.initColumns()}initColumns(){this.cols=[{field:"codigo",header:"C\xF3digo",sort:!0},{field:"cantidad",header:"Cantidad",sort:!0},{field:"valorCompra",header:"Valor",sort:!0},{field:"fecha",header:"Fecha de creaci\xF3n",sort:!0},{field:"descripcion",header:"Descripci\xF3n",sort:!0}]}generateMenu(i,n,e){n.toggle(e),this.itemsMenu=[{label:"Editar",icon:"pi pi-pencil",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Gestion}/${u.Edit}/`,i.id])}},{label:"Eliminar",icon:"pi pi-trash",command:()=>{this.delete(i)}}]}toAddIngreso(){this.router.navigate([`/${u.Insumo}/${u.Gestion}/${u.New}/`,this.insumo.id])}back(){this.router.navigate([`/${u.Insumo}`])}getSeverity(i){switch(i){case ye.CAMARA_FRIO:return"primary";case ye.ESTANTE:return"warning";case ye.FREEZER:return"info"}}delete(i){this.confirmationDialogService.confirmDelete(`\xBFEst\xE1 seguro que desea eliminar el ingreso con codigo ${i.codigo} ?`,()=>{this.ingresoInsumoService.delete(i.id).subscribe(()=>{this.getRefresh()})})}getRefresh(){this.id=Number(this.activateRouter.snapshot.paramMap.get("id")),this.insumosService.getById(this.id).subscribe(i=>this.insumo=i)}};r.\u0275fac=function(n){return new(n||r)(c(g),c(B),c(T),c(se),c(w))},r.\u0275cmp=I({type:r,selectors:[["app-insumo-detail"]],viewQuery:function(n,e){if(n&1&&Ge(ai,5),n&2){let d;je(d=Pe())&&(e.dt=d.first)}},features:[F([g,w])],decls:29,vars:15,consts:[["dt",""],["menu",""],["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"grid"],[1,"col-6"],[1,"mb-4","text-sm"],[1,"font-bold","mt-2"],[1,"p-card-title"],[1,"flex","justify-content-end","flex-wrap","mb-3"],["pRipple","","severity","primary","label","Agregar Ingreso","icon","pi pi-plus",1,"mr-2",3,"onClick"],[1,"col-12"],["dataKey","id","currentPageReportTemplate","Mostrar {first} a {last} de {totalRecords} registros",3,"value","rows","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left","mt-4"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],[2,"width","4rem"],[3,"pSortableColumn"],[3,"field"],["pButton","","pRipple","","type","button","icon","pi pi-bars",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],[1,"text-center","py-4"]],template:function(n,e){if(n&1){let d=q();a(0,"p-button",2),h("click",function(){return R(d),N(e.back())}),o(),a(1,"p-card")(2,"div",3)(3,"div",4)(4,"span",5),l(5,"Gestion de ingresos"),o(),a(6,"div",6)(7,"div",7),l(8),z(9,"titlecase"),o()()(),a(10,"div",4)(11,"div",8)(12,"p-button",9),h("onClick",function(){return R(d),N(e.toAddIngreso())}),o()()(),a(13,"div",4),l(14," Cantidad total: "),a(15,"b"),l(16),o()(),a(17,"div",10),l(18," Descripci\xF3n: "),a(19,"b"),l(20),o()()(),v(21,"p-divider"),a(22,"p-table",11,0),D(24,si,7,0,"ng-template",12)(25,ci,5,0,"ng-template",13)(26,Ci,7,2,"ng-template",14)(27,yi,2,1,"ng-template",15)(28,bi,3,1,"ng-template",16),o()()}n&2&&(m(8),b(" ",H(9,11,e.insumo==null?null:e.insumo.nombre),""),m(8),Be("",e.insumo==null?null:e.insumo.totalCantidadDisponible," ",e.insumo==null?null:e.insumo.unidadMedida,""),m(4),W((e.insumo==null?null:e.insumo.descripcion)||"-"),m(2),p("value",e.insumo==null?null:e.insumo.ingresos)("rows",5)("paginator",!0)("globalFilterFields",Z(13,mi))("tableStyle",Z(14,li))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[me,wt,le,S,Je,M,ge,_e,he,x,pe,ae,lt,de]});let t=r;return t})();var Ii=[{path:"",redirectTo:"query",pathMatch:"full"},{path:u.Query,component:Nt,title:"Listado de Insumos"},{path:`${u.Edit}/:id`,component:Vt,title:"Editar Insumo"},{path:u.New,component:kt,title:"Agregar Insumo"},{path:`${u.Gestion}/:id`,component:Gt,title:"Detalle de Insumo"},{path:`${u.Gestion}/${u.New}/:id`,component:At,title:"Registrar Ingreso de Insumo"},{path:`${u.Gestion}/${u.Edit}/:id`,component:$t,title:"Editar Ingreso de Insumo"}],Ko=(()=>{let r=class r{};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Ae({type:r}),r.\u0275inj=$e({imports:[ze,et.forChild(Ii),Rt,Dt,Ze,We,dt,_t,pt,ht,Ct,yt,bt,gt,nt,Xe,Ee,It,mt,ft,Ft,xt,St,Et,ut,vt,Tt,Ke,ot,Mt,at,Ee,ct,st]});let t=r;return t})();export{Ko as InsumosModule};
