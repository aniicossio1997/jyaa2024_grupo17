import{a as he,b as ye,c as wt}from"./chunk-AXZXP77O.js";import{a as vt,b as gt,c as ht,d as It,e as Ft,g as xt}from"./chunk-DIJEXQVT.js";import{a as Je,b as We,c as tt,d as it,e as nt}from"./chunk-IG2HBKO5.js";import{a as g}from"./chunk-PKO2OHKX.js";import{a as Tt,b as Mt,c as be,d as Dt}from"./chunk-C2756QQK.js";import{a as _e,b as Ct}from"./chunk-CNX4EVCT.js";import{a as pe}from"./chunk-DJPC4CBX.js";import{B as yt,D as bt,E as q,F as U,G as St,H as Et,a as at,b as M,c as lt,j as ue,k as st,m as ce,n as pt,o as fe,p as ve,q as ge,r as dt,s as O,t as ut,u as ct,w as ft,y as _t}from"./chunk-6ORVLML4.js";import{B as x,C as Ke,D as se,E as S,F as Ze,H as $,I as E,K as A,L as G,P as j,Q as B,S as P,U as L,V as Xe,W as Ee,X as u,_ as Q,a as He,aa as T,ba as Ye,da as et,ga as de,ha as ot,oa as rt,pa as mt,s as le}from"./chunk-FEXW6FWZ.js";import{$ as Ae,Cb as Ge,Db as je,Eb as Be,Fb as H,Fc as Qe,Gb as s,Hb as Z,Hc as Oe,Ib as I,Ic as qe,Jb as Pe,Jc as Ue,Mc as ae,Na as m,Nb as F,Nc as me,Oa as c,Oc as ze,Pb as J,Q as ke,Qb as Le,R as $e,V as Ie,Yb as V,Zb as k,_ as C,a as Ne,b as Ve,db as D,eb as oe,fb as p,ha as R,ia as N,kb as Ce,lb as Fe,mb as xe,nb as Se,ob as a,pb as o,qb as v,r as W,rb as ne,sb as re,ub as z,wb as h,xb as f}from"./chunk-G7V5XMVF.js";var Lt=()=>["nombre","totalValorCompra"],Qt=()=>({"min-width":"auto"}),Ot=t=>[t];function qt(t,r){if(t&1){let l=z();a(0,"h2",9),s(1,"Insumos"),o(),a(2,"div",10)(3,"span",11),v(4,"i",12),a(5,"input",13),h("input",function(n){R(l),f();let e=H(2);return N(e.filterGlobal(n.target.value,"contains"))}),o()(),v(6,"p-button",14),o()}if(t&2){let l=f();m(6),p("routerLink",Le(1,Ot,"/"+l.RoutestEnum.Insumo+"/"+l.RoutestEnum.New))}}function Ut(t,r){if(t&1&&(a(0,"th",17),s(1),v(2,"p-sortIcon",18),o()),t&2){let l=r.$implicit;p("pSortableColumn",l.field),m(),I(" ",l.header," "),m(),p("field",l.field)}}function zt(t,r){if(t&1&&(a(0,"tr")(1,"th",15),s(2," Acciones "),o(),D(3,Ut,3,3,"th",16),o()),t&2){let l=f();m(3),p("ngForOf",l.cols)}}function Ht(t,r){if(t&1&&(ne(0),s(1),V(2,"titlecase"),re()),t&2){let l=f().$implicit,i=f().$implicit;m(),I(" ",k(2,1,i[l.field])," ")}}function Kt(t,r){if(t&1&&(ne(0),s(1),V(2,"currency"),re()),t&2){let l=f().$implicit,i=f().$implicit;m(),I(" ",k(2,1,i[l.field])," ")}}function Zt(t,r){if(t&1&&(ne(0),s(1),re()),t&2){let l=f().$implicit,i=f().$implicit;m(),I(" ",i[l.field]," ")}}function Jt(t,r){if(t&1&&(a(0,"td",22),D(1,Ht,3,3,"ng-container",23)(2,Kt,3,3,"ng-container",23)(3,Zt,2,1,"ng-container",24),o()),t&2){let l=r.$implicit;p("ngSwitch",l.field),m(),p("ngSwitchCase","nombre"),m(),p("ngSwitchCase","totalValorCompra")}}function Wt(t,r){if(t&1){let l=z();a(0,"tr")(1,"td")(2,"button",19),h("click",function(n){let e=R(l).$implicit,d=H(4),_=f();return N(_.generateMenu(e,d,n))}),o(),v(3,"p-menu",20,1),o(),D(5,Jt,4,3,"td",21),o()}if(t&2){let l=f();m(3),p("popup",!0)("model",l.itemsMenu),m(2),p("ngForOf",l.cols)}}function Xt(t,r){if(t&1&&(a(0,"div",25),s(1),o()),t&2){let l=f(),i=H(2);m(),I(" En total hay ",i.filteredValue?i.filteredValue.length:l.insumos.length," registros. ")}}function Yt(t,r){t&1&&(a(0,"tr")(1,"td",26),s(2," No se encontraron registros "),o()()),t&2&&(m(),oe("colspan",5))}var Rt=(()=>{let r=class r{get RoutestEnum(){return u}constructor(i,n,e){this.insumosService=i,this.confirmationDialogService=n,this.router=e,this.cols=[],this.insumos=[],this.itemsMenu=[]}ngOnInit(){this.initColumns(),this.getAll()}initColumns(){this.cols=[{field:"nombre",header:"Nombre"},{field:"unidadMedida",header:"Unidad de medida"},{field:"totalCantidadDisponible",header:"Total cantidad disponible"},{field:"totalValorCompra",header:"Total valor de compra"}]}getAll(){this.insumosService.get().subscribe(i=>this.insumos=i)}generateMenu(i,n,e){n.toggle(e),this.itemsMenu=[{label:"Gestionar ingresos",icon:"pi pi-arrow-right-arrow-left ",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Gestion}/`,i.id])}},{label:"Editar",icon:"pi pi-pencil",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Edit}/`,i.id])}},{label:"Eliminar",icon:"pi pi-trash",command:()=>{this.delete(i)}}]}delete(i){this.confirmationDialogService.confirmDelete(`\xBFEst\xE1 seguro que desea eliminar la materia prima ${i.nombre.toLocaleUpperCase()} ?`,()=>{this.insumosService.delete(i.id).subscribe(()=>{this.getAll()})})}};r.\u0275fac=function(n){return new(n||r)(c(g),c(pe),c(T))},r.\u0275cmp=C({type:r,selectors:[["app-insumos-query"]],features:[F([g])],decls:8,vars:9,consts:[["dt",""],["menu",""],[1,"card"],["dataKey","id","currentPageReportTemplate","Mostrar {first} a {last} de {totalRecords} registros",3,"value","rows","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"mb-4"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pRipple","","label","Agragar Insumo","icon","pi pi-plus",1,"mr-2",3,"routerLink"],[2,"width","4rem"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","pRipple","","type","button","icon","pi pi-bars",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"flex","align-items-center","justify-content-between"],[1,"text-center","py-4"]],template:function(n,e){n&1&&(a(0,"div",2)(1,"p-table",3,0),D(3,qt,7,3,"ng-template",4)(4,zt,4,1,"ng-template",5)(5,Wt,6,3,"ng-template",6)(6,Xt,2,1,"ng-template",7)(7,Yt,3,1,"ng-template",8),o()()),n&2&&(m(),p("value",e.insumos)("rows",5)("paginator",!0)("globalFilterFields",J(7,Lt))("tableStyle",J(8,Qt))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[Qe,Oe,qe,Ue,Ye,le,se,S,M,fe,ve,ge,x,de,ae,me]});let t=r;return t})();var Nt=(()=>{let r=class r{constructor(i,n,e,d){this.fb=i,this.router=n,this.insumosService=e,this.activatedRouter=d,this.unidadMedidaArray=Object.keys(he),this.myForm=this.fb.group({nombre:["",E.required],unidadMedida:["",E.required],descripcion:[""]})}ngOnInit(){let i=Number(this.activatedRouter.snapshot.paramMap.get("id"));i&&this.insumosService.getById(i).subscribe(n=>{this.insumo=Ve(Ne({},n),{cantidadDisponible:0}),this.myForm.get("nombre").setValue(n.nombre),this.myForm.get("descripcion").setValue(n.descripcion),this.myForm.get("unidadMedida").setValue(n.unidadMedida),this.myForm.updateValueAndValidity()})}cancel(){this.router.navigate(["/"+u.Insumo])}save(){if(this.myForm.valid){let i={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value,unidadMedida:this.myForm.get("unidadMedida").value};this.insumosService.put(this.insumo.id,i).subscribe(n=>{n&&this.router.navigate([`/${u.Insumo}/`])})}}};r.\u0275fac=function(n){return new(n||r)(c(L),c(T),c(g),c(Q))},r.\u0275cmp=C({type:r,selectors:[["app-insumos-edit"]],features:[F([g])],decls:22,vars:10,consts:[[1,"card",2,"width","80%"],[1,"mb-5"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","firstname2"],["pInputText","","id","firstname2","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["placeholder","Selecciona una unidad de medida","formControlName","unidadMedida",3,"options","autoDisplayFirst","value"],["htmlFor","descripcionid"],["formControlName","descripcion","placeholder","Descripci\xF3n","rows","5","cols","30","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Volver","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(n,e){if(n&1&&(a(0,"div",0)(1,"h5",1),s(2,"Editar Insumo"),o(),a(3,"form",2)(4,"div",3)(5,"label",4),s(6,"Nombre *"),o(),v(7,"input",5)(8,"span",6),o(),a(9,"div",3)(10,"label",7),s(11,"Unidad de medida *"),o(),v(12,"p-dropdown",8),o(),a(13,"div",3)(14,"label",9),s(15,"Descripci\xF3n"),o(),a(16,"textarea",10),s(17,"      "),o()(),a(18,"div",11)(19,"div",12)(20,"p-button",13),h("click",function(){return e.cancel()}),o(),a(21,"p-button",14),h("click",function(){return e.save()}),o()()()()()),n&2){let d,_,y,b;m(3),p("formGroup",e.myForm),m(4),p("valueForm",(d=e.myForm.get("nombre"))==null?null:d.value)("errors",(_=e.myForm.get("nombre"))==null?null:_.errors),m(),p("valueForm",(y=e.myForm.get("nombre"))==null?null:y.value)("errors",(b=e.myForm.get("nombre"))==null?null:b.errors),m(4),p("options",e.unidadMedidaArray)("autoDisplayFirst",!1)("value",e.myForm.get("unidadMedida")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,j,$,A,G,B,P,ue,x,q,U]});let t=r;return t})();var Vt=(()=>{let r=class r{constructor(i,n,e){this.fb=i,this.router=n,this.insumosService=e,this.unidadMedidaArray=Object.keys(he),this.initForm()}ngOnInit(){}initForm(){this.myForm=this.fb.group({nombre:["",E.required],unidadMedida:["",E.required],descripcion:[""]})}cancel(){this.router.navigate(["/"+u.Insumo])}save(){if(this.myForm.valid){let i={nombre:this.myForm.get("nombre").value,descripcion:this.myForm.get("descripcion").value,unidadMedida:this.myForm.get("unidadMedida").value};this.insumosService.post(i).subscribe(n=>{n&&this.cancel()})}}};r.\u0275fac=function(n){return new(n||r)(c(L),c(T),c(g))},r.\u0275cmp=C({type:r,selectors:[["app-insumos-new"]],features:[F([g])],decls:22,vars:10,consts:[[1,"card",2,"width","80%"],[1,"mb-5"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","firstname2"],["pInputText","","id","firstname2","type","text","formControlName","nombre","placeholder","Nombre","appCustomInputError","",3,"valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["placeholder","Selecciona una unidad de medida","formControlName","unidadMedida",3,"options","autoDisplayFirst","value"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","5","cols","30","placeholder","Descripci\xF3n","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(n,e){if(n&1&&(a(0,"div",0)(1,"h5",1),s(2,"Agregar Insumo"),o(),a(3,"form",2)(4,"div",3)(5,"label",4),s(6,"Nombre *"),o(),v(7,"input",5)(8,"span",6),o(),a(9,"div",3)(10,"label",7),s(11,"Unidad de medida *"),o(),v(12,"p-dropdown",8),o(),a(13,"div",3)(14,"label",9),s(15,"Descripci\xF3n"),o(),a(16,"textarea",10),s(17,"      "),o()(),a(18,"div",11)(19,"div",12)(20,"p-button",13),h("click",function(){return e.cancel()}),o(),a(21,"p-button",14),h("click",function(){return e.save()}),o()()()()()),n&2){let d,_,y,b;m(3),p("formGroup",e.myForm),m(4),p("valueForm",(d=e.myForm.get("nombre"))==null?null:d.value)("errors",(_=e.myForm.get("nombre"))==null?null:_.errors),m(),p("valueForm",(y=e.myForm.get("nombre"))==null?null:y.value)("errors",(b=e.myForm.get("nombre"))==null?null:b.errors),m(4),p("options",e.unidadMedidaArray)("autoDisplayFirst",!1)("value",e.myForm.get("unidadMedida")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,j,$,A,G,B,P,ue,x,q,U]});let t=r;return t})();var w=(()=>{let r=class r{constructor(i,n){this.http=i,this.toastr=n,this.API_URL=at.API_URL+"ingresoInsumo"}delete(i){let n=`${this.API_URL}/${i}`;return this.http.delete(n).pipe(W(e=>(this.toastr.success("Exito! Se elimino el ingreso del insumo "),e)))}post(i){let n=`${this.API_URL}`;return this.http.post(n,i).pipe(W(e=>(this.toastr.success("Exito! se registro un nuevo ingreso "),e)))}getById(i){let n=`${this.API_URL}/${i}`;return this.http.get(n).pipe(W(e=>e))}putEdit(i,n){let e=`${this.API_URL}/${i}`;return this.http.put(e,n).pipe(W(d=>(this.toastr.success("Exito! se modifico el registro "),d)))}};r.\u0275fac=function(n){return new(n||r)(Ie(He),Ie(mt))},r.\u0275prov=ke({token:r,factory:r.\u0275fac});let t=r;return t})();var kt=(()=>{let r=class r{constructor(i,n,e,d,_){this.activatedRoute=i,this.router=n,this.ingresoInsumoService=e,this.fb=d,this.insumosService=_,this.positiveNumberValidator=y=>{let b=y.value;return isNaN(b)||b<0?{positiveNumber:{value:y.value}}:null},this.initForm()}ngOnInit(){this.id=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.ingresoInsumoService.getById(this.id).subscribe(i=>{i&&(this.ingreso=i,this.myForm.get("descripcion").setValue(this.ingreso.descripcion),this.myForm.get("valorCompra").setValue(this.ingreso.valorCompra),this.myForm.get("cantidad").setValue(this.ingreso.cantidad),this.myForm.updateValueAndValidity())})}cancel(){this.router.navigate([`/${u.Insumo}/${u.Gestion}`,this.ingreso.insumo.id])}save(){if(this.myForm.valid){let i={descripcion:this.myForm.get("descripcion").value,cantidad:this.myForm.get("cantidad").value,codigo:this.ingreso.codigo,valorCompra:this.myForm.get("valorCompra").value,insumoId:this.ingreso.insumo.id};this.ingresoInsumoService.putEdit(this.id,i).subscribe(n=>{n&&this.cancel()})}}initForm(){this.myForm=this.fb.group({descripcion:[""],valorCompra:["",[E.required,this.positiveNumberValidator]],codigo:[""],cantidad:["",[E.required,this.positiveNumberValidator]]})}};r.\u0275fac=function(n){return new(n||r)(c(Q),c(T),c(w),c(L),c(g))},r.\u0275cmp=C({type:r,selectors:[["app-insumos-edit-ingreso"]],features:[F([w,g])],decls:37,vars:14,consts:[["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"card",2,"width","80%"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","familiaPrimaId",1,"mr-3"],["id","disabled-input","type","text","pInputText","",1,"font-bold",3,"disabled","value"],["htmlFor","valorCompra"],["inputId","locale-user","id","valorCompra","formControlName","valorCompra","appCustomInputError","",3,"minFractionDigits","valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["pInputText","","placeholder","Ingrese una cantidad","formControlName","cantidad",3,"value"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","4","cols","20","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(n,e){if(n&1&&(a(0,"p-button",0),h("click",function(){return e.cancel()}),o(),a(1,"div",1)(2,"h5",2),s(3,"Editar Ingreso"),o(),a(4,"form",3)(5,"div",4)(6,"label",5),s(7,"C\xF3digo: "),o(),v(8,"input",6),o(),a(9,"div",4)(10,"label",5),s(11,"Insumo: "),o(),v(12,"input",6),o(),a(13,"div",4)(14,"label",7),s(15,"Valor de compra *"),o(),a(16,"p-inputGroup")(17,"p-inputGroupAddon"),s(18,"$"),o(),v(19,"p-inputNumber",8),o(),v(20,"span",9),o(),a(21,"div",4)(22,"label",10),s(23,"Cantidad*"),o(),a(24,"p-inputGroup")(25,"p-inputGroupAddon"),s(26),o(),v(27,"input",11),o()(),a(28,"div",4)(29,"label",12),s(30,"Descripci\xF3n"),o(),a(31,"textarea",13),s(32,"      "),o()(),a(33,"div",14)(34,"div",15)(35,"p-button",16),h("click",function(){return e.cancel()}),o(),a(36,"p-button",17),h("click",function(){return e.save()}),o()()()()()),n&2){let d,_,y,b;m(4),p("formGroup",e.myForm),m(4),p("disabled",!0)("value",e.ingreso==null?null:e.ingreso.codigo),m(4),p("disabled",!0)("value",e.ingreso==null?null:e.ingreso.insumo.nombre),m(7),p("minFractionDigits",2)("valueForm",(d=e.myForm.get("valorCompra"))==null?null:d.value)("errors",(_=e.myForm.get("valorCompra"))==null?null:_.errors),m(),p("valueForm",(y=e.myForm.get("valorCompra"))==null?null:y.value)("errors",(b=e.myForm.get("valorCompra"))==null?null:b.errors),m(6),I(" ",e.ingreso==null?null:e.ingreso.unidadMedida," "),m(),p("value",e.myForm.get("cantidad")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,j,$,A,G,B,P,_e,ce,x,be,q,U]});let t=r;return t})();var $t=(()=>{let r=class r{constructor(i,n,e,d,_){this.activatedRoute=i,this.router=n,this.ingresoInsumoService=e,this.fb=d,this.insumosService=_,this.positiveNumberValidator=y=>{let b=y.value;return isNaN(b)||b<0?{positiveNumber:{value:y.value}}:null},this.initForm()}ngOnInit(){let i=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.insumosService.getById(i).subscribe(n=>{this.insumo=n,this.myForm.updateValueAndValidity()})}cancel(){this.router.navigate([`/${u.Insumo}/${u.Gestion}`,this.insumo.id])}save(){if(this.myForm.valid){let i={descripcion:this.myForm.get("descripcion").value,cantidad:this.myForm.get("cantidad").value,codigo:"",valorCompra:this.myForm.get("valorCompra").value,insumoId:this.insumo.id};this.ingresoInsumoService.post(i).subscribe(n=>{n&&this.cancel()})}}initForm(){this.myForm=this.fb.group({descripcion:[""],valorCompra:["",[E.required,this.positiveNumberValidator]],codigo:[""],cantidad:["",[E.required,this.positiveNumberValidator]]})}};r.\u0275fac=function(n){return new(n||r)(c(Q),c(T),c(w),c(L),c(g))},r.\u0275cmp=C({type:r,selectors:[["app-insumo-add-ingreso"]],features:[F([w,g])],decls:33,vars:12,consts:[["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"card",2,"width","80%"],[1,"mb-5","m-2"],[1,"p-fluid","p-formgrid","grid",3,"formGroup"],[1,"field","col-12","md:col-12"],["htmlFor","familiaPrimaId",1,"mr-3"],["id","disabled-input","type","text","pInputText","",1,"font-bold",3,"disabled","value"],["htmlFor","valorCompra"],["inputId","locale-user","id","valorCompra","formControlName","valorCompra","appCustomInputError","",3,"minFractionDigits","valueForm","errors"],["customLabel","",3,"valueForm","errors"],["htmlFor","unidadMedida"],["pInputText","","placeholder","Ingrese una cantidad","formControlName","cantidad",3,"value"],["htmlFor","descripcionid"],["formControlName","descripcion","rows","4","cols","20","pInputTextarea","",3,"autoResize"],[1,"field","col-12"],[1,"flex","justify-content-between","flex-wrap"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","secondary",3,"click"],["pRipple","","label","Guardar","icon","pi pi-check",3,"click","disabled"]],template:function(n,e){if(n&1&&(a(0,"p-button",0),h("click",function(){return e.cancel()}),o(),a(1,"div",1)(2,"h5",2),s(3,"Agregar Ingreso"),o(),a(4,"form",3)(5,"div",4)(6,"label",5),s(7,"Insumo: "),o(),v(8,"input",6),o(),a(9,"div",4)(10,"label",7),s(11,"Valor de compra *"),o(),a(12,"p-inputGroup")(13,"p-inputGroupAddon"),s(14,"$"),o(),v(15,"p-inputNumber",8),o(),v(16,"span",9),o(),a(17,"div",4)(18,"label",10),s(19,"Cantidad*"),o(),a(20,"p-inputGroup")(21,"p-inputGroupAddon"),s(22),o(),v(23,"input",11),o()(),a(24,"div",4)(25,"label",12),s(26,"Descripci\xF3n"),o(),a(27,"textarea",13),s(28,"      "),o()(),a(29,"div",14)(30,"div",15)(31,"p-button",16),h("click",function(){return e.cancel()}),o(),a(32,"p-button",17),h("click",function(){return e.save()}),o()()()()()),n&2){let d,_,y,b;m(4),p("formGroup",e.myForm),m(4),p("disabled",!0)("value",e.insumo==null?null:e.insumo.nombre),m(7),p("minFractionDigits",2)("valueForm",(d=e.myForm.get("valorCompra"))==null?null:d.value)("errors",(_=e.myForm.get("valorCompra"))==null?null:_.errors),m(),p("valueForm",(y=e.myForm.get("valorCompra"))==null?null:y.value)("errors",(b=e.myForm.get("valorCompra"))==null?null:b.errors),m(6),I(" ",e.insumo==null?null:e.insumo.unidadMedida," "),m(),p("value",e.myForm.get("cantidad")),m(4),p("autoResize",!0),m(5),p("disabled",e.myForm.invalid)}},dependencies:[S,M,O,j,$,A,G,B,P,_e,ce,x,be,q,U]});let t=r;return t})();var ni=["dt"],ri=()=>["nombre","cantidad","descripcion","valorCompra"],ai=()=>({"min-width":"auto"});function mi(t,r){if(t&1){let l=z();a(0,"div",17)(1,"div")(2,"h5",18),s(3,"Historial de ingresos"),o(),a(4,"span",19),v(5,"i",20),a(6,"input",21),h("input",function(n){R(l),f();let e=H(28);return N(e.filterGlobal(n.target.value,"contains"))}),o()()()()}}function li(t,r){if(t&1&&(a(0,"th",23),s(1),v(2,"p-sortIcon",24),o()),t&2){let l=f().$implicit;p("pSortableColumn",l.field),m(),I(" ",l.header," "),m(),p("field",l.field.nombre)}}function si(t,r){if(t&1&&(a(0,"th",23),s(1),v(2,"p-sortIcon",24),o()),t&2){let l=f().$implicit;p("pSortableColumn",l.field),m(),I(" ",l.header," "),m(),p("field",l.field)}}function pi(t,r){if(t&1&&D(0,li,3,3,"th",23)(1,si,3,3,"th",23),t&2){let l,i=r.$implicit;Ce((l=i.field)==="familiaProductora"?0:1)}}function di(t,r){if(t&1&&(a(0,"tr")(1,"th",22),s(2," Acciones "),o(),xe(3,pi,2,1,null,null,Fe),o()),t&2){let l=f();m(3),Se(l.cols)}}function ui(t,r){if(t&1&&(a(0,"td"),s(1),V(2,"dateTransformPipe"),o()),t&2){let l=f().$implicit,i=f().$implicit;m(),Z(k(2,1,i[l.field]))}}function ci(t,r){if(t&1&&(a(0,"td"),s(1),V(2,"currency"),o()),t&2){let l=f().$implicit,i=f().$implicit;m(),Z(k(2,1,i[l.field]))}}function fi(t,r){if(t&1&&(a(0,"td"),s(1),a(2,"b"),s(3),o()()),t&2){let l=f().$implicit,i=f().$implicit,n=f();m(),I("",i[l.field]," "),m(2),Z(n.insumo==null?null:n.insumo.unidadMedida)}}function vi(t,r){if(t&1&&(a(0,"td"),s(1),o()),t&2){let l=f().$implicit,i=f().$implicit;m(),I(" ",i[l.field]==""?"-":i[l.field]," ")}}function gi(t,r){if(t&1&&D(0,ui,3,3,"td")(1,ci,3,3,"td")(2,fi,4,2,"td")(3,vi,2,1,"td"),t&2){let l,i=r.$implicit;Ce((l=i.field)==="fecha"?0:l==="valorCompra"?1:l==="cantidad"?2:3)}}function _i(t,r){if(t&1){let l=z();a(0,"tr")(1,"td")(2,"button",25),h("click",function(n){let e=R(l).$implicit,d=H(4),_=f();return N(_.generateMenu(e,d,n))}),o(),v(3,"p-menu",26,1),o(),xe(5,gi,4,1,null,null,Fe),o()}if(t&2){let l=f();m(3),p("popup",!0)("model",l.itemsMenu),m(2),Se(l.cols)}}function hi(t,r){if(t&1&&(a(0,"div",17),s(1),o()),t&2){let l=f();m(),I(" En total hay ",l.insumo!=null&&l.insumo.ingresos?l.insumo.ingresos.length:0," registros. ")}}function yi(t,r){t&1&&(a(0,"tr")(1,"td",27),s(2," No se encontraron registros "),o()()),t&2&&(m(),oe("colspan",5))}var At=(()=>{let r=class r{get RoutestEnum(){return u}constructor(i,n,e,d,_){this.insumosService=i,this.activateRouter=n,this.router=e,this.confirmationDialogService=d,this.ingresoInsumoService=_,this.itemsMenu=[]}ngOnInit(){this.getRefresh(),this.initColumns()}initColumns(){this.cols=[{field:"codigo",header:"C\xF3digo",sort:!0},{field:"cantidad",header:"Cantidad",sort:!0},{field:"valorCompra",header:"Valor",sort:!0},{field:"fecha",header:"Fecha de creaci\xF3n",sort:!0},{field:"descripcion",header:"Descripci\xF3n",sort:!0}]}generateMenu(i,n,e){n.toggle(e),this.itemsMenu=[{label:"Editar",icon:"pi pi-pencil",command:()=>{this.router.navigate([`/${u.Insumo}/${u.Gestion}/${u.Edit}/`,i.id])}},{label:"Eliminar",icon:"pi pi-trash",command:()=>{this.delete(i)}}]}toAddIngreso(){this.router.navigate([`/${u.Insumo}/${u.Gestion}/${u.New}/`,this.insumo.id])}back(){this.router.navigate([`/${u.Insumo}`])}getSeverity(i){switch(i){case ye.CAMARA_FRIO:return"primary";case ye.ESTANTE:return"warning";case ye.FREEZER:return"info"}}delete(i){this.confirmationDialogService.confirmDelete(`\xBFEst\xE1 seguro que desea eliminar el ingreso con codigo ${i.codigo} ?`,()=>{this.ingresoInsumoService.delete(i.id).subscribe(()=>{this.getRefresh()})})}getRefresh(){this.id=Number(this.activateRouter.snapshot.paramMap.get("id")),this.insumosService.getById(this.id).subscribe(i=>this.insumo=i)}};r.\u0275fac=function(n){return new(n||r)(c(g),c(Q),c(T),c(pe),c(w))},r.\u0275cmp=C({type:r,selectors:[["app-insumo-detail"]],viewQuery:function(n,e){if(n&1&&Ge(ni,5),n&2){let d;je(d=Be())&&(e.dt=d.first)}},features:[F([g,w])],decls:34,vars:18,consts:[["dt",""],["menu",""],["pRipple","","label","Volver","icon","pi pi-arrow-left","styleClass","mb-4","severity","secondary",3,"click"],[1,"grid"],[1,"col-6"],[1,"mb-4","text-sm"],[1,"font-bold","mt-2"],[1,"p-card-title"],[1,"flex","justify-content-end","flex-wrap","mb-3"],["pRipple","","severity","primary","label","Agregar Ingreso","icon","pi pi-plus",1,"mr-2",3,"click"],[1,"col-12"],["dataKey","id","currentPageReportTemplate","Mostrar {first} a {last} de {totalRecords} registros",3,"value","rows","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left","mt-4"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],[2,"width","4rem"],[3,"pSortableColumn"],[3,"field"],["pButton","","pRipple","","type","button","icon","pi pi-bars",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],[1,"text-center","py-4"]],template:function(n,e){if(n&1){let d=z();a(0,"p-button",2),h("click",function(){return R(d),N(e.back())}),o(),a(1,"p-card")(2,"div",3)(3,"div",4)(4,"span",5),s(5,"Gestion de ingresos"),o(),a(6,"div",6)(7,"div",7),s(8),V(9,"titlecase"),o()()(),a(10,"div",4)(11,"div",8)(12,"p-button",9),h("click",function(){return R(d),N(e.toAddIngreso())}),o()()(),a(13,"div",4),s(14," Cantidad total: "),a(15,"b"),s(16),o()(),a(17,"div",4),s(18," Valor de compra total: "),a(19,"b"),s(20),V(21,"currency"),o()(),a(22,"div",10),s(23," Descripci\xF3n: "),a(24,"b"),s(25),o()()(),v(26,"p-divider"),a(27,"p-table",11,0),D(29,mi,7,0,"ng-template",12)(30,di,5,0,"ng-template",13)(31,_i,7,2,"ng-template",14)(32,hi,2,1,"ng-template",15)(33,yi,3,1,"ng-template",16),o()()}n&2&&(m(8),I(" ",k(9,12,e.insumo==null?null:e.insumo.nombre),""),m(8),Pe("",e.insumo==null?null:e.insumo.totalCantidadDisponible," ",e.insumo==null?null:e.insumo.unidadMedida,""),m(4),Z(k(21,14,e.insumo==null?null:e.insumo.totalValorCompra)),m(5),Z((e.insumo==null?null:e.insumo.descripcion)||"-"),m(2),p("value",e.insumo==null?null:e.insumo.ingresos)("rows",5)("paginator",!0)("globalFilterFields",J(16,ri))("tableStyle",J(17,ai))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[le,Tt,se,S,Je,M,fe,ve,ge,x,de,ae,me,St]});let t=r;return t})();var bi=[{path:"",redirectTo:"query",pathMatch:"full"},{path:u.Query,component:Rt,title:"Listado de Insumos"},{path:`${u.Edit}/:id`,component:Nt,title:"Editar Insumo"},{path:u.New,component:Vt,title:"Agregar Insumo"},{path:`${u.Gestion}/:id`,component:At,title:"Detalle de Insumo"},{path:`${u.Gestion}/${u.New}/:id`,component:$t,title:"Registrar Ingreso de Insumo"},{path:`${u.Gestion}/${u.Edit}/:id`,component:kt,title:"Editar Ingreso de Insumo"}],Uo=(()=>{let r=class r{};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Ae({type:r}),r.\u0275inj=$e({imports:[ze,et.forChild(bi),wt,Mt,Ze,We,lt,ut,rt,ct,ft,vt,gt,dt,it,Xe,Ee,_t,nt,st,ht,yt,bt,It,Ct,pt,Ft,Ke,tt,xt,ot,Ee,Dt,Et]});let t=r;return t})();export{Uo as InsumosModule};
